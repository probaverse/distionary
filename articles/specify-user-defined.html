<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Specifying Your Own Distribution • distionary</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Specifying Your Own Distribution">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-73DKMR0WHY"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-73DKMR0WHY');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">distionary</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/evaluate.html">Evaluate a Distribution</a></li>
    <li><a class="dropdown-item" href="../articles/specify-built-in.html">Built-In Distributions</a></li>
    <li><a class="dropdown-item" href="../articles/specify-user-defined.html">Specifying Your Own Distribution</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/probaverse/distionary/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Specifying Your Own Distribution</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/probaverse/distionary/blob/main/vignettes/specify-user-defined.Rmd" class="external-link"><code>vignettes/specify-user-defined.Rmd</code></a></small>
      <div class="d-none name"><code>specify-user-defined.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://distionary.probaverse.com/">distionary</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette explains how to create user-defined distributions using
<code>distionary</code>.</p>
<div class="section level2">
<h2 id="user-defined-distributions">User-Defined Distributions<a class="anchor" aria-label="anchor" href="#user-defined-distributions"></a>
</h2>
<p>You can make your own distribution using the
<code><a href="../reference/distribution.html">distribution()</a></code> function. Specify distribution properties as
name-value pairs, where the name is the distribution property.
Distributional <em>representations</em> like the cumulative distribution
function (CDF) can be specified as functions.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_normal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/distribution.html">distribution</a></span><span class="op">(</span></span>
<span>  density <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span>,</span>
<span>  cdf <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">pnorm</a></span>,</span>
<span>  range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  g <span class="op">=</span> <span class="fl">9.81</span>,</span>
<span>  another_representation <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">^</span><span class="fl">2</span>,</span>
<span>  .vtype <span class="op">=</span> <span class="st">"continuous"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Inspect</span></span>
<span><span class="va">my_normal</span></span>
<span><span class="co">#&gt; Unnamed distribution (continuous) </span></span>
<span><span class="co">#&gt; --Parameters--</span></span>
<span><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>The usual evaluation framework can now be accessed, such as
evaluating the CDF.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/cdf.html">eval_cdf</a></span><span class="op">(</span><span class="va">my_normal</span>, at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.5792597 0.6914625 0.7580363</span></span></code></pre></div>
<p>Even though the mean has not been specified, it can still be
evaluated.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">my_normal</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>Some of the specified properties are special because they correspond
to a property that’s known to distionary – in this example,
<code>density</code>, <code>cdf</code>, and <code>range</code>. In
general, the special names can be identified as follows:</p>
<ul>
<li>The suffix following <code>eval_</code> for any distributional
representation (e.g., <code>quantile</code> for
<code><a href="../reference/quantile.html">eval_quantile()</a></code>). These should be specified as
functions.</li>
<li>
<code>realise</code> or <code>realize</code>, which is used to
generate random samples from the distribution. This should be a function
of the number of observations to draw.</li>
<li>The same name as the <code>distionary</code> functions used to
extract any other property (e.g., <code>mean</code> for
<code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>).</li>
</ul>
<p>See the <a href="./evaluate.html">Evaluate a Distribution</a>
vignette for more details on these evaluation functions and the network
of relationships between the understood properties. Note that, in the
current version, specifying a <code>cdf</code> along with a
<code>density</code> or <code>pmf</code> (probability mass function) is
required for evaluating non-explicit properties.</p>
<p>In general, properties can be invoked by the more general function
<code><a href="../reference/eval_property.html">eval_property()</a></code>, which is useful for accessing entries that
are not known to <code>distionary</code>. For example, the user-defined
property <code>g</code> can be accessed in this way.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eval_property.html">eval_property</a></span><span class="op">(</span><span class="va">my_normal</span>, <span class="st">"g"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9.81</span></span></code></pre></div>
<p>To use <code><a href="../reference/eval_property.html">eval_property()</a></code> to evaluate a function, arguments
can be specified in the <code>...</code> argument.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/eval_property.html">eval_property</a></span><span class="op">(</span><span class="va">my_normal</span>, <span class="st">"another_representation"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  1  4  9 16</span></span></code></pre></div>
<p>The <code><a href="../reference/eval_property.html">eval_property()</a></code> function is also useful for
programmatically accessing distribution properties.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">properties</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"variance"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">properties</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="../reference/eval_property.html">eval_property</a></span><span class="op">(</span><span class="va">my_normal</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="distribution-attributes">Distribution Attributes<a class="anchor" aria-label="anchor" href="#distribution-attributes"></a>
</h2>
<p>Distribution metadata are stored as attributes, and are those
arguments prefixed by <code>.</code> in the <code><a href="../reference/distribution.html">distribution()</a></code>
function.</p>
<ul>
<li>
<code>.vtype</code>, as seen in the example starting this vignette,
is used to specify the variable type, such as <code>"discrete"</code> or
<code>"continuous"</code>.</li>
<li>
<code>.name</code> allows you to give the distribution a name.</li>
<li>
<code>.parameters</code> allows you to specify values for the
distribution’s parameters as a list, if applicable. This version of
<code>distionary</code> does not draw from these values, so it currently
serves a similar function as the distribution’s name.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_distribution</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/distribution.html">distribution</a></span><span class="op">(</span></span>
<span>  cdf <span class="op">=</span> <span class="va">pnorm</span>,</span>
<span>  density <span class="op">=</span> <span class="va">dnorm</span>,</span>
<span>  .vtype <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  .name <span class="op">=</span> <span class="st">"Special"</span>,</span>
<span>  .parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="fl">1.7</span>, mat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>, hello <span class="op">=</span> <span class="st">"hi"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Inspect</span></span>
<span><span class="va">my_distribution</span></span>
<span><span class="co">#&gt; Special distribution (continuous) </span></span>
<span><span class="co">#&gt; --Parameters--</span></span>
<span><span class="co">#&gt; $theta</span></span>
<span><span class="co">#&gt; [1] 1.7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $mat</span></span>
<span><span class="co">#&gt;      [,1] [,2]</span></span>
<span><span class="co">#&gt; [1,]    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $hello</span></span>
<span><span class="co">#&gt; [1] "hi"</span></span></code></pre></div>
<p>Retrieve the variable type:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vtype.html">vtype</a></span><span class="op">(</span><span class="va">my_distribution</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "continuous"</span></span></code></pre></div>
<p>Retrieve the parameters:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/parameters.html">parameters</a></span><span class="op">(</span><span class="va">my_distribution</span><span class="op">)</span></span>
<span><span class="co">#&gt; $theta</span></span>
<span><span class="co">#&gt; [1] 1.7</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $mat</span></span>
<span><span class="co">#&gt;      [,1] [,2]</span></span>
<span><span class="co">#&gt; [1,]    1    0</span></span>
<span><span class="co">#&gt; [2,]    0    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $hello</span></span>
<span><span class="co">#&gt; [1] "hi"</span></span></code></pre></div>
<p>You can also reset the parameters with <code>&lt;-</code>. Lets give
this distribution scalar parameters.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/parameters.html">parameters</a></span><span class="op">(</span><span class="va">my_distribution</span><span class="op">)</span><span class="op">[[</span><span class="st">"mat"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="fu"><a href="../reference/parameters.html">parameters</a></span><span class="op">(</span><span class="va">my_distribution</span><span class="op">)</span><span class="op">[[</span><span class="st">"hello"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="co"># Inspect the distribution</span></span>
<span><span class="va">my_distribution</span></span>
<span><span class="co">#&gt; Special distribution (continuous) </span></span>
<span><span class="co">#&gt; --Parameters--</span></span>
<span><span class="co">#&gt; theta   mat </span></span>
<span><span class="co">#&gt;   1.7   1.0</span></span></code></pre></div>
<p>Retrieve the distribution’s name with <code><a href="../reference/pretty_name.html">pretty_name()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_name.html">pretty_name</a></span><span class="op">(</span><span class="va">my_distribution</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Special"</span></span></code></pre></div>
<p>Names are “pretty” because they can also include the parameters in a
compact way, when the parameters are scalars (which they now are):</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pretty_name.html">pretty_name</a></span><span class="op">(</span><span class="va">my_distribution</span>, param_digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Special(1.7, 1)"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-of-a-new-parametric-family">Example of a New Parametric Family<a class="anchor" aria-label="anchor" href="#example-of-a-new-parametric-family"></a>
</h2>
<p>If you want to create your own parametric family, such as a
distribution whose density decays linearly from <code>x=0</code> to
<code>x=a</code>, you can do this by making a function that accepts the
distribution parameter as an input, and outputs the distribution. Note
that the CDF and density are specified, as required for continuous
distributions, and metadata are specified with the arguments starting
with <code>.</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dst_linear</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># It helps to check that the parameter is valid.</span></span>
<span>  <span class="fu">checkmate</span><span class="fu">::</span><span class="fu"><a href="https://mllg.github.io/checkmate/reference/checkNumber.html" class="external-link">assert_number</a></span><span class="op">(</span><span class="va">a</span>, lower <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="co"># We'll create some representations outside of the `distribution()`</span></span>
<span>  <span class="co"># call for separation of concerns. Note that care is taken to ensure</span></span>
<span>  <span class="co"># proper behaviour outside of the range of the distribution.</span></span>
<span>  <span class="va">density</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">d</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">/</span> <span class="va">a</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="op">(</span><span class="va">a</span> <span class="op">-</span> <span class="va">x</span><span class="op">)</span></span>
<span>    <span class="va">d</span><span class="op">[</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">|</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="va">a</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">d</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">cdf</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">p</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">/</span> <span class="va">a</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">a</span> <span class="op">-</span> <span class="va">x</span><span class="op">)</span></span>
<span>    <span class="va">p</span><span class="op">[</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">p</span><span class="op">[</span><span class="va">x</span> <span class="op">&gt;</span> <span class="va">a</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>    <span class="va">p</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="co"># Create the distribution.</span></span>
<span>  <span class="fu"><a href="../reference/distribution.html">distribution</a></span><span class="op">(</span></span>
<span>    density <span class="op">=</span> <span class="va">density</span>,</span>
<span>    cdf <span class="op">=</span> <span class="va">cdf</span>,</span>
<span>    range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">a</span><span class="op">)</span>,</span>
<span>    .vtype <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>    .name <span class="op">=</span> <span class="st">"Linear"</span>,</span>
<span>    .parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">a</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Notice how the distribution metadata gets printed with the
distribution.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dst_linear</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; Linear distribution (continuous) </span></span>
<span><span class="co">#&gt; --Parameters--</span></span>
<span><span class="co">#&gt; a </span></span>
<span><span class="co">#&gt; 3</span></span></code></pre></div>
<p>Here are the density plots of different members of this family.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">dst_linear</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, to <span class="op">=</span> <span class="fl">4</span>, col <span class="op">=</span> <span class="st">"purple"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">dst_linear</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">dst_linear</span><span class="op">(</span><span class="fl">4</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span></span>
<span>  <span class="st">"topright"</span>,</span>
<span>  legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a = 1"</span>, <span class="st">"a = 2"</span>, <span class="st">"a = 4"</span><span class="op">)</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"purple"</span>, <span class="st">"red"</span>, <span class="st">"blue"</span><span class="op">)</span>,</span>
<span>  lty <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="specify-user-defined_files/figure-html/unnamed-chunk-16-1.png" class="r-plt" width="700"></p>
<p>As usual, properties can be evaluated, even if they are not
specified. Consider, for example, calculating return periods of three
different Linear distributions.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/return.html">enframe_return</a></span><span class="op">(</span></span>
<span>  model1 <span class="op">=</span> <span class="fu">dst_linear</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>  model2 <span class="op">=</span> <span class="fu">dst_linear</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>,</span>
<span>  model3 <span class="op">=</span> <span class="fu">dst_linear</span><span class="op">(</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>  at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">50</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>  arg_name <span class="op">=</span> <span class="st">"return_period"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   return_period return_model1 return_model2 return_model3</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>             2         0.293         0.586          1.17</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>             5         0.553         1.11           2.21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>            10         0.684         1.37           2.74</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>            20         0.776         1.55           3.11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>            50         0.859         1.72           3.43</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>           100         0.900         1.80           3.60</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="network-of-properties">Network of Properties<a class="anchor" aria-label="anchor" href="#network-of-properties"></a>
</h2>
<p>The key innovation in <code>distionary</code> is its network-based
approach to probability distributions. Different distributional
representations (CDF, PDF/PMF, quantile function, survival function,
etc.) are interconnected through a network of mathematical
relationships.</p>
<p>The diagram below shows how <code>distionary</code> derives
distribution properties from other properties. An arrow from one
property to another indicates that the first property can be calculated
from the second. For example, <code>quantile</code> can be calculated
from <code>cdf</code>, and <code>mean</code> can be calculated from
<code>density</code>. This network structure is what allows you to
define a custom distribution with just one or two representations (like
<code>cdf</code> and <code>density</code> in the example above) and
still have access to all other properties.</p>
<!-- 
Network diagram generated using man/figures/network_diagram.R script.
The script uses DiagrammeR and Graphviz DOT language to create the diagram.
To regenerate: Rscript man/figures/network_diagram.R
-->
<p><img src="network_diagram.png" class="r-plt" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="making-your-own-properties">Making your own properties<a class="anchor" aria-label="anchor" href="#making-your-own-properties"></a>
</h2>
<p>Some properties are easy to make yourself. Here is an example of a
function that calculates interquartile range.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a function that takes a distribution as input, and returns the</span></span>
<span><span class="co"># interquartile range.</span></span>
<span><span class="va">iqr</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">distribution</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="fu"><a href="../reference/quantile.html">eval_quantile</a></span><span class="op">(</span><span class="va">distribution</span>, at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Apply the function to a Linear distribution as defined before.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">iqr</span><span class="op">(</span><span class="fu">dst_linear</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.7320508</span></span></code></pre></div>
<p>For properties that are not handled by <code>distionary</code> (e.g.,
extreme value index, or moment generating function), one option is to
build these properties into your own distribution. A future version of
<code>distionary</code> will make user-defined properties easier to work
with.</p>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<p>The <code>distionary</code> package is still young. Lots of helpful
features are still missing, and your patience is appreciated as more
features are developed. Some examples follow.</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="54%">
<col width="27%">
</colgroup>
<thead><tr class="header">
<th>#</th>
<th>Limitation</th>
<th>Explanation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1.</td>
<td>When a user-specified distribution isn’t continuous (e.g., is
discrete), only the properties specified in <code><a href="../reference/distribution.html">distribution()</a></code>
can be accessed in this version.</td>
<td>Specifying the set of possible outcomes for discrete distributions
requires special attention, particularly when there are infinitely many
of them.</td>
</tr>
<tr class="even">
<td>2.</td>
<td>Representations are not checked for accuracy in this version.</td>
<td>While this is done in the test suite for the built-in distributions,
additional levels of detail are required when accepting a foreign
distribution.</td>
</tr>
<tr class="odd">
<td>3.</td>
<td>Typos when specifying distribution property names
(e.g. <code>densty</code> instead of <code>density</code>) or variable
type (e.g., <code>"contnous"</code> instead of
<code>"continuous"</code>) will not trigger an error.</td>
<td>The package does not assume that distribution properties and types
are limited, allowing for flexibility.</td>
</tr>
<tr class="even">
<td>4.</td>
<td>It is currently assumed that the distributional representations are
specified in a way that remains valid beyond the range of the
distribution.</td>
<td>A future version aims to use the specified range to automatically
implement appropriate behavior.</td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vincenzo Coia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
