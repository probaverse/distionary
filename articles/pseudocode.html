<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Pseudocode • distionary</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pseudocode">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-73DKMR0WHY"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-73DKMR0WHY');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">distionary</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/evaluate.html">Evaluate a Distribution</a></li>
    <li><a class="dropdown-item" href="../articles/pseudocode.html">Pseudocode</a></li>
    <li><a class="dropdown-item" href="../articles/specify-built-in.html">Built-In Distributions</a></li>
    <li><a class="dropdown-item" href="../articles/specify-user-defined.html">Specifying Your Own Distribution</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/probaverse/distionary/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Pseudocode</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/probaverse/distionary/blob/v0.1.0/vignettes/pseudocode.Rmd" class="external-link"><code>vignettes/pseudocode.Rmd</code></a></small>
      <div class="d-none name"><code>pseudocode.Rmd</code></div>
    </div>

    
    
<p>This document outlines the core functionalities of
<code>distionary</code> for other programming languages. Developers can
add extra checks as needed.</p>
<div class="section level2">
<h2 id="distribution-objects">Distribution Objects<a class="anchor" aria-label="anchor" href="#distribution-objects"></a>
</h2>
<p>Distribution objects store user-defined properties and distribution
metadata. The key metadata field is <code>vtype</code> (e.g.,
continuous, discrete, mixed). Properties and metadata are bundled in a
dictionary-like structure (<code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code>).</p>
<pre><code>distribution = function(properties, vtype = Null):
  return {properties = properties, vtype = vtype}</code></pre>
<p>Currently, <code>distionary</code> supports only numeric, univariate
distributions (i.e., single variable). Future versions will support
multivariate distributions.</p>
</div>
<div class="section level2">
<h2 id="common-distribution-families">Common Distribution Families<a class="anchor" aria-label="anchor" href="#common-distribution-families"></a>
</h2>
<p>Wrappers allow access to common distributions like Normal and
Poisson, prefixed with <code>dst_</code>. For example:</p>
<pre><code>dst_norm = function(mean, sd):
  return distribution(
    properties = [
      density = function(x) dnorm(x, mean = mean, sd = sd),
      realise = function(n) rnorm(n, mean = mean, sd = sd),
      ...,
      range = [-Inf, Inf],
      mean = mean,
      stdev = sd,
      skewness = 0,
      ...
    ],
    vtype = "continuous"
  )</code></pre>
<p>Here, <code>[]</code> is a list-like structure that can be used to
pass arguments to the function. <code>dnorm</code> and
<code>rnorm</code> are assumed to be available or should be implemented
manually.</p>
<p>In addition to common families, a Null distribution that always
evaluates to NA should be created. This object is useful when external
algorithms fail, where a Null distribution can be output instead of an
error.</p>
</div>
<div class="section level2">
<h2 id="evaluating">Evaluating<a class="anchor" aria-label="anchor" href="#evaluating"></a>
</h2>
<p>Start with thin wrappers for evaluating specific properties, which
invoke the general function <code>eval_property</code>.</p>
<p>Properties that are not functions can be accessed by functions of the
same name:</p>
<pre><code>mean = function(distribution):
  eval_property(distribution, name = "mean")

range = function(distribution):
  eval_property(distribution, name = "range")</code></pre>
<p>Properties that are functions are prefixed with <code>eval_</code> to
indicate they require an argument, passed with <code>at</code>. All such
properties currently in distionary only have one argument, but in
principle could accept others; these all go in <code>[]</code>.</p>
<pre><code>eval_density = function(distribution, at):
  eval_property(distribution, name = "density", args = [at])

eval_survival = function(distribution, at):
  eval_property(distribution, name = "cdf", args = [at])</code></pre>
<p>The <code>at</code> parameter can accept a vector of values. The
current version supports a single distribution input, but future
versions might allow recycling both arguments.</p>
<p>The main function <code>eval_property</code> evaluates properties if
present or delegates network evaluation. If the property is a function,
it will evaluate it using the provided arguments in <code>args</code>.
By default, <code>args</code> is <code>Null</code>, meaning arguments
are not relevant (therefore, this argument can be ignored for numeric
properties).</p>
<pre><code>eval_property = function(distribution, property_name, args = Null):
  properties = subset(distribution, "properties")
  property = subset(properties, property_name)
  if is_null(property):
    return eval_from_network(distribution, name = property_name, args = args)
  else if is_function(property):
    return property(args)
  else:
    return property</code></pre>
<p>Use <code>subset</code> to retrieve entries from dictionary-like
structures. <code>property(args)</code> means to call the function
property with arguments.</p>
<p>The absence of a property is evaluated using a <a href="https://distionary.probaverse.com/articles/specify-user-defined#network-of-properties">network
of properties</a>, specifying how one property can be retrieved from
others. For example, the cumulative hazard function (CHF) can be
calculated using the survival function:</p>
<pre><code>eval_from_network = function(distribution, name, args):
  if name == "chf":
    return -log(eval_survival(distribution, args))
  if name == "survival":
    return 1 - eval_cdf(distribution, args)
  if name == "mean":
  ...</code></pre>
<p>Network evaluation is still robust against whether the survival
function has been specified for the distribution due to the use of
<code>eval_survival</code>: if the survival function can’t be retrieved
from the distribution, it will evaluate it from the network, this time
from the cumulative distribution function (CDF). The network has been
set up to avoid getting caught in a loop, so that the survival function
doesn’t look back to the CHF for evaluation – it’s (mostly) a directed
acyclic graph.</p>
<p>Network computation failures throw errors, though future versions
might allow user-specified error-handling strategies.</p>
<p>The defined network is not unique. For example, the CHF could be
retrieved from the hazard function rather than the survival function.
The network was minimized for numerical efficiency.</p>
<p>Currently, the CDF and density/PMF anchor the property network,
meaning that they are assumed available. Future improvements may
implement networks as their own objects, customized to each distribution
to be seeded from the properties specified in each distribution.</p>
</div>
<div class="section level2">
<h2 id="enframing">Enframing<a class="anchor" aria-label="anchor" href="#enframing"></a>
</h2>
<p>Instead of <code>eval</code>uating properties that are functions,
<code>enframe</code> these to place inputs and outputs in tabular form.
This is useful for table-centric data analyses. Start with simple
wrappers:</p>
<pre><code>enframe_density = function(distributions, at):
  enframe_general(distributions, at = at, eval_fn = eval_density)

enframe_survival = function(distributions, at):
  enframe_general(distributions, at = at, eval_fn = eval_survival)</code></pre>
<p><code>distributions</code> might contain multiple distributions. The
main function loops over each distribution, adding results to new
columns:</p>
<pre><code>enframe_general = function(distributions, at, eval_fn):
  tbl = [x = at]
  for d in distributions:
    y = eval_fn(d, at)
    tbl = append(tbl, [y])
  return tbl</code></pre>
<p>The developer may wish to consider features related to column
naming.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vincenzo Coia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
